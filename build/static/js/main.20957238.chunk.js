(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{127:function(e,t){},130:function(e,t,a){},164:function(e,t,a){},165:function(e,t,a){},166:function(e,t,a){},167:function(e,t,a){},168:function(e,t,a){},169:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(43),c=a.n(r),o=(a(81),a(11)),i=a.n(o),l=a(15),m=a(4),u=a(5),p=a(7),f=a(6),h=(a(83),a(22)),d=a(68);h.b.add(d.a);var v,g=a(69),E=a(16),b=a(17),A=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"inputfield"},s.a.createElement("input",{type:this.props.type,className:this.props.classname,placeholder:this.props.placeholder,value:this.props.value,onChange:function(t){return e.props.onChange(t.target.value)}}))}}]),a}(s.a.Component),N=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return s.a.createElement("button",{className:this.props.classname,disabled:this.props.disabled,value:this.props.value,onClick:function(){return e.props.onclick()}},this.props.text)}}]),a}(s.a.Component),y=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"notification is-"+this.props.notif.type},s.a.createElement("button",{className:"delete","aria-label":"delete",onClick:this.props.remove}),this.props.notif.message)}}]),a}(n.Component),O=a(2),j=a(29),w=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={username:"",password:"",isLoggedIn:!1,notif:{active:!1,type:"",message:""}},e.removeMessage=function(){e.setState({notif:Object(b.a)(Object(b.a)({},e.state.notif),{},{active:!e.state.notif.active})})},e}return Object(u.a)(a,[{key:"setInputValue",value:function(e,t){t=t.trim(),this.setState(Object(E.a)({},e,t))}},{key:"resetForm",value:function(){this.setState({username:"",password:"",buttonDisabled:!1}),Array.from(document.getElementsByTagName("input")).forEach((function(e){return e.value=""}))}},{key:"login",value:function(){var e=Object(l.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(this.state.username,this.state.password),this.state.username&&this.state.password){e.next=5;break}this.setState({isLoggedIn:!1,notif:{active:!0,type:"danger",message:"Please fill in all fields!"}}),e.next=19;break;case 5:return this.setState({buttonDisabled:!0}),e.prev=6,e.next=9,fetch("/user/login",{method:"POST",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({name:this.state.username,password:this.state.password})});case 9:return t=e.sent,e.next=12,t.json();case 12:(a=e.sent)&&a.success?this.setState({isLoggedIn:!0,notif:{active:!0,type:"success",message:a.msg}}):a&&!1===a.success&&this.setState({notif:{active:!0,type:"danger",message:a.msg}}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(6),console.log(e.t0);case 19:case"end":return e.stop()}}),e,this,[[6,16]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return console.log(this.props.showForms),console.log(this.state.notif.active),!0===this.state.isLoggedIn?s.a.createElement(O.a,{to:"/chat"}):s.a.createElement("div",{className:"column loginform"},s.a.createElement("h3",{className:"title is-3"},"Login"),this.state.notif.active&&s.a.createElement(y,{remove:this.removeMessage,notif:this.state.notif}),s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control"},s.a.createElement(A,{type:"text",classname:"input",placeholder:"Username",onChange:function(t){return e.setInputValue("username",t)}}))),s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control"},s.a.createElement(A,{type:"password",classname:"input",placeholder:"Password",onChange:function(t){return e.setInputValue("password",t)}}))),s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"level"},s.a.createElement("div",{className:"level-left"},s.a.createElement("div",{className:"control"},s.a.createElement(j.b,{to:"/chat?name=".concat(this.state.username,"&room='default room'")},s.a.createElement(N,{classname:"button is-info",value:"LOG IN",text:"Login",onclick:function(){return e.login()}})))),s.a.createElement("div",{className:"level-right"},s.a.createElement("a",{onClick:this.props.showForms},"Register")))))}}]),a}(s.a.Component),C=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).removeMessage=function(){n.setState({notif:Object(b.a)(Object(b.a)({},n.state.notif),{},{active:!n.state.notif.active})})},n.state={username:"",email:"",password:"",confirmpassword:"",buttonDisabled:!1,notif:{active:!1,type:"",message:""}},n}return Object(u.a)(a,[{key:"setInputValue",value:function(e,t){t=t.trim(),this.setState(Object(E.a)({},e,t))}},{key:"resetForm",value:function(){this.setState({username:"",email:"",password:"",confirmpassword:"",buttonDisabled:!1}),Array.from(document.getElementsByTagName("input")).forEach((function(e){return e.value=""}))}},{key:"register",value:function(){var e=Object(l.a)(i.a.mark((function e(){var t,a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.username&&this.state.email&&this.state.password&&this.state.confirmpassword){e.next=3;break}return this.setState({notif:{active:!0,type:"danger",message:"Please fill in all fields!"}}),e.abrupt("return");case 3:return this.setState({buttonDisabled:!0}),e.prev=4,t=JSON.stringify({name:this.state.username,email:this.state.email,password:this.state.password,password2:this.state.confirmpassword}),e.next=8,fetch("/user/register",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:t});case 8:return a=e.sent,e.next=11,a.json();case 11:(n=e.sent)&&n.success?(this.resetForm(),this.setState({notif:{active:!0,type:"success",message:n.msg}})):n&&!1===n.success&&(this.resetForm(),this.setState({notif:{active:!0,type:"danger",message:n.msg}})),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(4),console.log(e.t0),this.resetForm();case 19:case"end":return e.stop()}}),e,this,[[4,15]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return console.log(this.state.notif),s.a.createElement("div",{className:"column registerform"},s.a.createElement("h3",{className:"title is-3"},"Register"),this.state.notif.active&&s.a.createElement(y,{remove:this.removeMessage,notif:this.state.notif}),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Username"),s.a.createElement("div",{className:"control"},s.a.createElement(A,{type:"text",classname:"input",placeholder:"Username",onChange:function(t){return e.setInputValue("username",t)}}))),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Email"),s.a.createElement("div",{className:"control"},s.a.createElement(A,{type:"text",classname:"input",placeholder:"Email",onChange:function(t){return e.setInputValue("email",t)}}))),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Password"),s.a.createElement("div",{className:"control"},s.a.createElement(A,{type:"password",classname:"input",placeholder:"Password",onChange:function(t){return e.setInputValue("password",t)}}))),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Confirm Password"),s.a.createElement("div",{className:"control"},s.a.createElement(A,{type:"password",classname:"input",placeholder:"Confirm Password",onChange:function(t){return e.setInputValue("confirmpassword",t)}}))),s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"level"},s.a.createElement("div",{className:"level-right"},s.a.createElement("div",{className:"control"},s.a.createElement(N,{classname:"submitbutton button is-normal is-info",text:"REGISTER",disabled:this.state.buttonDisabled,onclick:function(){return e.register()}}))),s.a.createElement("div",{className:"level-left"},s.a.createElement("a",{onClick:this.props.showForms},"Login")))))}}]),a}(s.a.Component),k=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={register:!1},e.showForms=function(){e.setState({register:!e.state.register}),console.log("hey!")},e}return Object(u.a)(a,[{key:"render",value:function(){return s.a.createElement("div",null,this.state.register&&s.a.createElement(C,{showForms:this.showForms}),!this.state.register&&s.a.createElement(w,{showForms:this.showForms}))}}]),a}(n.Component),x=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column is-4 is-flex has-background-link has-text-centered"},s.a.createElement("section",{className:"logo title"},s.a.createElement(g.a,{icon:"comment-dots",color:"white",size:"5x"}),s.a.createElement("h4",{className:"title is-5 has-text-white"},"KUMUSTA APP"))),s.a.createElement("div",{className:"column is-8 is-flex"},s.a.createElement("section",{className:"login-form"},s.a.createElement(k,null))))}}]),a}(n.Component),S=a(75),I=a(18),M=a(71),B=a.n(M),F=a(72),P=a.n(F),U=a(31),R=a.n(U),T=(a(130),function(e){var t=e.users;return s.a.createElement("div",{className:"textContainer"},t?s.a.createElement("div",null,s.a.createElement("h1",null,"Online:"),s.a.createElement("div",{className:"activeContainer"},s.a.createElement("h2",null,t.map((function(e){var t=e.name;return s.a.createElement("div",{key:t,className:"activeItem"},t,s.a.createElement("img",{alt:"Online Icon",src:R.a}))}))))):null)}),V=a(73),D=a.n(V),L=(a(164),a(46)),J=a.n(L),K=function(e){var t=e.message,a=t.text,n=t.user,r=!1,c=e.name.trim().toLowerCase();return n===c&&(r=!0),r?s.a.createElement("div",{className:"messageContainer justifyEnd"},s.a.createElement("p",{className:"sentText pr-10"},c),s.a.createElement("div",{className:"messageBox backgroundBlue"},s.a.createElement("p",{className:"messageText colorWhite"},J.a.emojify(a)))):s.a.createElement("div",{className:"messageContainer justifyStart"},s.a.createElement("div",{className:"messageBox backgroundLight"},s.a.createElement("p",{className:"messageText colorDark"},J.a.emojify(a))),s.a.createElement("p",{className:"sentText pl-10 "},n))},Q=(a(165),function(e){var t=e.messages,a=e.name;return s.a.createElement(D.a,{className:"messages"},t.map((function(e,t){return s.a.createElement("div",{key:t},s.a.createElement(K,{message:e,name:a}))})))}),Y=a(74),G=a.n(Y),W=(a(166),function(e){var t=e.user;return s.a.createElement("div",{className:"infoBar"},s.a.createElement("div",{className:"leftInnerContainer"},s.a.createElement("img",{className:"onlineIcon",src:R.a,alt:"online icon"}),s.a.createElement("h3",null,t)),s.a.createElement("div",{className:"rightInnerContainer"},s.a.createElement("a",{href:"/"},s.a.createElement("img",{src:G.a,alt:"close icon"}))))}),X=(a(167),function(e){var t=e.setMessage,a=e.sendMessage,n=e.message;return s.a.createElement("form",{className:"form"},s.a.createElement("input",{className:"input",type:"text",placeholder:"Type a message...",value:n,onChange:function(e){var a=e.target.value;return t(a)},onKeyPress:function(e){return"Enter"===e.key?a(e):null}}),s.a.createElement("button",{className:"sendButton",onClick:function(e){return a(e)}},"Send"))}),Z=(a(168),function(e){var t=e.location,a=Object(n.useState)(""),r=Object(I.a)(a,2),c=r[0],o=r[1],i=Object(n.useState)(""),l=Object(I.a)(i,2),m=(l[0],l[1]),u=Object(n.useState)(""),p=Object(I.a)(u,2),f=p[0],h=p[1],d=Object(n.useState)(""),g=Object(I.a)(d,2),E=g[0],b=g[1],A=Object(n.useState)([]),N=Object(I.a)(A,2),y=N[0],O=N[1];Object(n.useEffect)((function(){var e=B.a.parse(t.search),a=e.name,n=e.room;v=P()("localhost:5000"),o(a),m(n),v.emit("join",{name:a,room:n},(function(e){e&&alert(e)}))}),["localhost:5000",t.search]),Object(n.useEffect)((function(){v.on("message",(function(e){O((function(t){return[].concat(Object(S.a)(t),[e])}))})),v.on("roomData",(function(e){var t=e.users;h(t)}))}),[]);return s.a.createElement("div",{className:"outerContainerNotBulma"},s.a.createElement("div",{className:"containerNotBulma"},s.a.createElement(W,{user:c}),s.a.createElement(Q,{messages:y,name:c}),s.a.createElement(X,{message:E,setMessage:b,sendMessage:function(e){e.preventDefault(),E&&v.emit("sendMessage",E,(function(){return b("")}))}})),s.a.createElement(T,{users:f}))}),q=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Component did mount."),e.next=3,fetch("/user").then((function(e){return e.text()})).then((function(e){return console.log(e)}));case 3:return e.next=5,fetch("/isproduction").then((function(e){return e.text()})).then((function(e){return console.log("is production? "+e)}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return s.a.createElement("div",{className:"app"},s.a.createElement(j.a,null,s.a.createElement(O.b,{path:"/",exact:!0,component:x}),s.a.createElement(O.b,{path:"/chat",component:Z})))}}]),a}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},31:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAYAAADgzO9IAAAAAXNSR0IArs4c6QAAAExJREFUCB1jbPh/le3lx5tNDIwMcQwg8J9hkTi/eh0LWJCBoRwoAAPlQDEGJrhKmDCIBupmQuYjs5lAZiILgNlAMRaQRSAz4UZCLQcAIwYaiAejKoYAAAAASUVORK5CYII="},74:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAHBJREFUGBmNkAEKwCAMA2VfGP2mrx3sOV2us6IymIXQGlNTW9zdhCqcZQm4dmelFUp+CZZa6sYpeUVIFyIixMqjCO51Wy5unQExuYSbSF5JASLqPsqRM21lOoWc89tagr3PSMgOiWlwnUeXWA/E78IfuAX270S3ydAAAAAASUVORK5CYII="},76:function(e,t,a){e.exports=a(169)},83:function(e,t,a){}},[[76,1,2]]]);
//# sourceMappingURL=main.20957238.chunk.js.map